<!DOCTYPE html>
<html lang="en">
  <head>
    <script
      src="https://code.jquery.com/jquery-3.6.4.js"
      integrity="sha256-a9jBBRygX1Bh5lt8GZjXDzyOB+bWve9EiO7tROUtj/E="
      crossorigin="anonymous"
    ></script>
    <script src="../../ajaxcalls.js"></script>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="keywords" content="" />
    <meta name="author" content="" />
    <meta name="robots" content="" />

    <meta name="description" content="Learn++ Course-X" />

    <meta property="og:title" content="Learn++ Course-X" />
    <meta property="og:description" content="Learn++ Course-X" />
    <meta property="og:image" content="" />
    <meta name="format-detection" content="telephone=no" />

    <link rel="icon" href="../error-404.html" type="image/x-icon" />
    <link
      rel="shortcut icon"
      type="image/x-icon"
      href="../images/favicon.png"
    />

    <title>Learn++ Course-X</title>

    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <link rel="stylesheet" type="text/css" href="../css/assets.css" />
    <link
      rel="stylesheet"
      type="text/css"
      href="../vendors/calendar/fullcalendar.css"
    />

    <link rel="stylesheet" type="text/css" href="../css/typography.css" />

    <link
      rel="stylesheet"
      type="text/css"
      href="../css/shortcodes/shortcodes.css"
    />

    <link rel="stylesheet" type="text/css" href="../css/style.css" />
    <link rel="stylesheet" type="text/css" href="../css/dashboard.css" />
    <link
      class="skin"
      rel="stylesheet"
      type="text/css"
      href="../css/color/color-1.css"
    />
  </head>

  <body class="ttr-opened-sidebar ttr-pinned-sidebar">
    <header class="ttr-header" id="ttr-header">
	
    </header>
    <script src="../js/header-right.js"></script>
    <div class="ttr-sidebar" id="sidebar"></div>
    <script src="../js/nav-bar-side.js"></script>

    <main class="ttr-wrapper">
      <div class="container-fluid">
        <div class="db-breadcrumb">
          <h4 class="breadcrumb-title">Edit Courses</h4>
          <ul class="db-breadcrumb-list">
            <li>
              <a href="tindex.html"><i class="fa fa-home"></i>Home</a>
            </li>
            <li><a href="edit-listing.html">Edit Courses</a></li>
          </ul>
        </div>
        <div class="row">
          <div class="col-lg-12 m-b30">
            <div class="widget-box">
              <div class="wc-title">
                <h4>Edit Courses</h4>
              </div>
              <div id="btns">

              </div>
              <div class="widget-inner">
                <form class="edit-profile m-b30">
                  <div class="row">
                    <div class="col-12">
                      <div class="ml-auto">
                        <h3>1. Basic Info</h3>
                      </div>
                    </div>
                    <div class="form-group col-6">
                      <label class="col-form-label" for="title"
                        >Course Title</label
                      >
                      <div id="title">
                       <input type="text" class="form-control" id="cname" value=""disabled>
                      </div>
                    </div>
                    <div class="form-group col-6">
                      <label class="col-form-label">Price</label>
                      <div>
                        <input
                          class="form-control"
                          id="cprice"
                          type="number"
                          value=""
                        />
                      </div>
                    </div>
                    <div class="form-group col-12">
                      <label class="col-form-label">Teacher Name</label>
                      <div>
                        <input
                          class="form-control"
                          type="email"
                          id="teacher_name"
                          value=""
                          disabled
                        />
                      </div>
                    </div>

                    <div class="seperator"></div>

                    <div class="col-12 m-t20">
                      <div class="ml-auto m-b5">
                        <h3>2. Course Details</h3>
                      </div>
                    </div>

                    <div class="form-group col-12">
                      <label class="col-form-label">Pre-Requisites</label>
                      <div>
                        <input class="form-control" type="text" id="cpreq" required/>
                      </div>
                    </div>

                    <div class="form-group col-12">
                      <label class="col-form-label">Course Description</label>
                      <div>
                        <input class="form-control" type="text" id="cdes" required/>
                      </div>
                    </div>

                    <div class="form-group col-12">
                      <label class="col-form-label">Category</label>
                      <div>
                        <input class="form-control" type="text" id="typ" required/>
                      </div>
                    </div>

                    <div class="col-12 m-t20">
                      <div class="ml-auto">
                        <h3 class="m-form__section">3. Add Item</h3>
                      </div>
                    </div>
                    <div class="col-12">
                      <table id="item-add" style="width: 100%">
                        <tr class="list-item">
                          <td>
                            <div class="row">
                              <div class="col-md-3">
                                <label class="col-form-label"
                                  >Module Name</label
                                >
                                <div>
                                  <input
                                    name="mname"
                                    class="form-control mname"
                                    type="text"
                                    value=""
                                  />
                                </div>
                              </div>

                              <div class="col-md-3">
                                <label class="col-form-label"
                                  >Video Lecture</label
                                >
                                <div>
                                  <input
                                    name="mvideo"
                                    class="form-control mvideo"
                                    type="url"
                                    value="https://youtu.be/gXofyAeb_1E"
                                  />
                                </div>
                              </div>
                              <div class="col-md-3">
                                <label class="col-form-label">Quiz</label>
                                <div>
                                  <input
                                    name="mquiz"
                                    class="form-control mquiz"
                                    type="file"
                                    value=""
                                  />
                                </div>
                              </div>

                              <div class="col-md-2">
                                <label class="col-form-label">Close</label>
                                <div class="form-group">
                                  <a class="delete" href="#"
                                    ><i class="fa fa-close"></i
                                  ></a>
                                </div>
                              </div>
                            </div>
                          </td>
                        </tr>
                      </table>
                    </div>
                    <div class="col-12">
                      <button type="button" class="btn-secondry add-item m-r5">
                        <i class="fa fa-fw fa-plus-circle"></i>Add Item
                      </button>
                      <button type="button" class="btn" onclick="reupload()">
                        Add course
                      </button>
                    </div>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>
    <div class="ttr-overlay"></div>
    <script>
      document.getElementById("teacher_name").value = JSON.parse(
        sessionStorage.getItem("email")
      ).email;
      $.get("http://localhost:3470/faculty-det/", function (obj, status) {
        var str = `<select name="title" id="course" class="form-control" onchange=func()>
            <option class = "form-control"  value="">--SELECT--</option>`;
        for (i in obj) {
            if(obj[i].status && obj[i].uploaded == JSON.parse(sessionStorage.getItem("email")).email)
                str += `<option><a class = "form-control" value='${obj[i].name}' >${obj[i].name}</a></option>`;
        }
        str += `</select>`
        document.getElementById("btns").innerHTML = str;
      });
    //   console.log(document.getElementById("courses").value);
    function func(){
        // console.log(data);
        $.get("http://localhost:3470/faculty-det/", function (obj, status) { 
            for (i in obj){
                if(obj[i].name == document.getElementById("course").value && obj[i].status){
                    // console.log(obj[i]);
                    $("#cname").val(obj[i].name);
                    $("#cprice").val(obj[i].price);
                    $("#typ").val(obj[i].type);
                    $("#cpreq").val(obj[i].prerequisites.toString());
                    $("#cdes").val(obj[i].description);
                    // for(let j=0; j< obj[i].modules.length ; j++){
                    //     document.getElementsByName("mname")[j].value = obj[i].module[j];
                    // }
                }
            }
        })
    }

    </script>

    <script src="../js/jquery.min.js"></script>
    <script src="../vendors/bootstrap/js/popper.min.js"></script>
    <script src="../vendors/bootstrap/js/bootstrap.min.js"></script>
    <script src="../vendors/bootstrap-select/bootstrap-select.min.js"></script>
    <script src="../vendors/bootstrap-touchspin/jquery.bootstrap-touchspin.js"></script>
    <script src="../vendors/magnific-popup/magnific-popup.js"></script>
    <script src="../vendors/counter/waypoints-min.js"></script>
    <script src="../vendors/counter/counterup.min.js"></script>
    <script src="../vendors/imagesloaded/imagesloaded.js"></script>
    <script src="../vendors/masonry/masonry.js"></script>
    <script src="../vendors/masonry/filter.js"></script>
    <script src="../vendors/owl-carousel/owl.carousel.js"></script>
    <script src="../vendors/scroll/scrollbar.min.js"></script>
    <script src="../js/functions.js"></script>
    <script src="../vendors/chart/chart.min.js"></script>
    <script src="../js/admin.js"></script>
    <script>
      // Pricing add
      function newMenuItem() {
        var newElem = $("tr.list-item").first().clone();
        newElem.find("input").val("");
        newElem.appendTo("table#item-add");
      }
      if ($("table#item-add").is("*")) {
        $(".add-item").on("click", function (e) {
          e.preventDefault();
          newMenuItem();
        });
        $(document).on("click", "#item-add .delete", function (e) {
          e.preventDefault();
          $(this).parent().parent().parent().parent().remove();
        });
      }
    </script>
  </body>
</html>
